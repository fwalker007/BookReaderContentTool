"use strict";var __makeTemplateObject=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImagesGrid=void 0;var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,templateObject_6,react_1=__importDefault(require("react")),styled_1=__importDefault(require("./styled")),core_1=require("@blueprintjs/core"),ImagesListContainer=styled_1.default("div")(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  height: 100%;\n  overflow: auto;\n"],["\n  height: 100%;\n  overflow: auto;\n"]))),ImagesRow=styled_1.default("div")(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  width: 33%;\n  float: left;\n"],["\n  width: 33%;\n  float: left;\n"]))),ImgWrapDiv=styled_1.default("div")(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  padding: 5px;\n  width: 100%;\n  &:hover .credit {\n    opacity: 1;\n  }\n"],["\n  padding: 5px;\n  width: 100%;\n  &:hover .credit {\n    opacity: 1;\n  }\n"]))),ImgContainerDiv=styled_1.default("div")(templateObject_4||(templateObject_4=__makeTemplateObject(["\n  border-radius: 5px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: ",";\n"],["\n  border-radius: 5px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: ",";\n"])),(function(e){return e["data-shadowenabled"]?"0 0 5px rgba(16, 22, 26, 0.3)":""})),Img=styled_1.default("img")(templateObject_5||(templateObject_5=__makeTemplateObject(["\n  width: 100%;\n  cursor: pointer;\n  display: block;\n"],["\n  width: 100%;\n  cursor: pointer;\n  display: block;\n"]))),CreditWrap=styled_1.default("div")(templateObject_6||(templateObject_6=__makeTemplateObject(["\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  font-size: 10px;\n  padding: 3px;\n  padding-top: 10px;\n  text-align: center;\n  background: linear-gradient(\n    to bottom,\n    rgba(0, 0, 0, 0),\n    rgba(0, 0, 0, 0.4),\n    rgba(0, 0, 0, 0.6)\n  );\n  width: 100%;\n  opacity: 0;\n  color: white;\n"],["\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  font-size: 10px;\n  padding: 3px;\n  padding-top: 10px;\n  text-align: center;\n  background: linear-gradient(\n    to bottom,\n    rgba(0, 0, 0, 0),\n    rgba(0, 0, 0, 0.4),\n    rgba(0, 0, 0, 0.6)\n  );\n  width: 100%;\n  opacity: 0;\n  color: white;\n"]))),Image=function(e){var t=e.url,n=e.credit,a=e.onSelect,r=e.crossOrigin,i=e.shadowEnabled,o=e.itemHeight,l=null==i||i;return react_1.default.createElement(ImgWrapDiv,{onClick:function(){a()}},react_1.default.createElement(ImgContainerDiv,{"data-shadowenabled":l},react_1.default.createElement(Img,{style:{height:null!=o?o:"auto"},src:t,draggable:!0,crossOrigin:r,onDragStart:function(){window.__polotnoDrop=function(e){var t=e.x,n=e.y;a({x:t,y:n})}},onDragEnd:function(e){window.__polotnoDrop=null}}),n&&react_1.default.createElement(CreditWrap,{className:"credit"},n)))},ImagesGrid=function(e){for(var t=e.images,n=e.onSelect,a=e.isLoading,r=e.getPreview,i=e.loadMore,o=e.getCredit,l=e.rowsNumber,d=e.crossOrigin,c=e.shadowEnabled,p=e.itemHeight,m=l||2,s=[],u=0;u<m;u++)s.push((t||[]).filter((function(e,t){return t%m===u})));return react_1.default.createElement(ImagesListContainer,{onScroll:function(e){var t=e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight;i&&!a&&t<200&&i()}},s.map((function(e,t){return react_1.default.createElement(ImagesRow,{key:t,style:{width:100/m+"%"}},e.map((function(e){return react_1.default.createElement(Image,{url:r(e),onSelect:function(t){return n(e,t)},key:r(e),credit:o&&o(e),crossOrigin:d,shadowEnabled:c,itemHeight:p})})))})),a&&react_1.default.createElement(core_1.Spinner,null))};exports.ImagesGrid=ImagesGrid;