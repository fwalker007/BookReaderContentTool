{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (e, t) {\n  return Object.defineProperty ? Object.defineProperty(e, \"raw\", {\n    value: t\n  }) : e.raw = t, e;\n},\n    __awaiter = this && this.__awaiter || function (e, t, r, a) {\n  return new (r || (r = Promise))(function (n, o) {\n    function l(e) {\n      try {\n        u(a.next(e));\n      } catch (e) {\n        o(e);\n      }\n    }\n\n    function i(e) {\n      try {\n        u(a.throw(e));\n      } catch (e) {\n        o(e);\n      }\n    }\n\n    function u(e) {\n      var t;\n      e.done ? n(e.value) : (t = e.value, t instanceof r ? t : new r(function (e) {\n        e(t);\n      })).then(l, i);\n    }\n\n    u((a = a.apply(e, t || [])).next());\n  });\n},\n    __generator = this && this.__generator || function (e, t) {\n  var r,\n      a,\n      n,\n      o,\n      l = {\n    label: 0,\n    sent: function sent() {\n      if (1 & n[0]) throw n[1];\n      return n[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return o = {\n    next: i(0),\n    throw: i(1),\n    return: i(2)\n  }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n    return this;\n  }), o;\n\n  function i(o) {\n    return function (i) {\n      return function (o) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; l;) {\n          try {\n            if (r = 1, a && (n = 2 & o[0] ? a.return : o[0] ? a.throw || ((n = a.return) && n.call(a), 0) : a.next) && !(n = n.call(a, o[1])).done) return n;\n\n            switch (a = 0, n && (o = [2 & o[0], n.value]), o[0]) {\n              case 0:\n              case 1:\n                n = o;\n                break;\n\n              case 4:\n                return l.label++, {\n                  value: o[1],\n                  done: !1\n                };\n\n              case 5:\n                l.label++, a = o[1], o = [0];\n                continue;\n\n              case 7:\n                o = l.ops.pop(), l.trys.pop();\n                continue;\n\n              default:\n                if (!(n = l.trys, (n = n.length > 0 && n[n.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                  l = 0;\n                  continue;\n                }\n\n                if (3 === o[0] && (!n || o[1] > n[0] && o[1] < n[3])) {\n                  l.label = o[1];\n                  break;\n                }\n\n                if (6 === o[0] && l.label < n[1]) {\n                  l.label = n[1], n = o;\n                  break;\n                }\n\n                if (n && l.label < n[2]) {\n                  l.label = n[2], l.ops.push(o);\n                  break;\n                }\n\n                n[2] && l.ops.pop(), l.trys.pop();\n                continue;\n            }\n\n            o = t.call(e, l);\n          } catch (e) {\n            o = [6, e], a = 0;\n          } finally {\n            r = n = 0;\n          }\n        }\n\n        if (5 & o[0]) throw o[1];\n        return {\n          value: o[0] ? o[1] : void 0,\n          done: !0\n        };\n      }([o, i]);\n    };\n  }\n},\n    __importDefault = this && this.__importDefault || function (e) {\n  return e && e.__esModule ? e : {\n    default: e\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.BackgroundPanel = void 0;\n\nvar templateObject_1,\n    react_1 = __importDefault(require(\"react\")),\n    mobx_react_lite_1 = require(\"mobx-react-lite\"),\n    swr_1 = require(\"swr\"),\n    styled_1 = __importDefault(require(\"./styled\")),\n    core_1 = require(\"@blueprintjs/core\"),\n    react_color_1 = require(\"react-color\"),\n    IosColorPalette_1 = __importDefault(require(\"@meronex/icons/ios/IosColorPalette\")),\n    images_grid_1 = require(\"./images-grid\"),\n    base_url_1 = require(\"../utils/base-url\"),\n    validate_key_1 = require(\"../utils/validate-key\"),\n    colors = [\"white\", \"rgb(82, 113, 255)\", \"rgb(255, 145, 77)\", \"rgb(126, 217, 87)\", \"rgb(255, 222, 89)\", \"rgb(203, 108, 230)\", \"rgb(255, 87, 87)\"],\n    Colored = styled_1.default(\"div\")(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: inline-block;\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 2px;\\n  box-shadow: 0 0 2px rgba(16, 22, 26, 0.3);\\n  cursor: pointer;\\n\"], [\"\\n  display: inline-block;\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 2px;\\n  box-shadow: 0 0 2px rgba(16, 22, 26, 0.3);\\n  cursor: pointer;\\n\"])));\n\nexports.BackgroundPanel = mobx_react_lite_1.observer(function (e) {\n  var t,\n      r,\n      a,\n      n = e.store,\n      o = swr_1.useSWRInfinite(function (e) {\n    return base_url_1.API + \"/get-unsplash?query=pattern&per_page=20&page=\" + (e + 1) + \"&KEY=\" + validate_key_1.getKey();\n  }, {\n    revalidateOnFocus: !1\n  }),\n      l = o.data,\n      i = o.error,\n      u = o.size,\n      c = o.setSize,\n      s = !l && !i || !!(u > 0 && l && void 0 === l[u - 1]),\n      d = 0 === (null === (t = null == l ? void 0 : l[0]) || void 0 === t ? void 0 : t.length) || l && l[0].total_pages === u;\n  return react_1.default.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }, react_1.default.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-around\",\n      paddingBottom: \"10px\"\n    }\n  }, react_1.default.createElement(core_1.Popover, {\n    content: react_1.default.createElement(react_color_1.SketchPicker, {\n      color: null === (r = n.activePage) || void 0 === r ? void 0 : r.background,\n      onChangeComplete: function onChangeComplete(e) {\n        var t,\n            r = e.rgb,\n            a = r.r,\n            o = r.g,\n            l = r.b,\n            i = r.a;\n        null === (t = n.activePage) || void 0 === t || t.set({\n          background: \"rgba(\" + a + \",\" + o + \",\" + l + \",\" + i + \")\"\n        });\n      }\n    }),\n    target: react_1.default.createElement(Colored, {\n      style: {\n        backgroundColor: null === (a = n.activePage) || void 0 === a ? void 0 : a.background,\n        fontSize: \"30px\"\n      }\n    }, react_1.default.createElement(IosColorPalette_1.default, {\n      style: {\n        mixBlendMode: \"difference\"\n      }\n    }))\n  }), colors.map(function (e) {\n    return react_1.default.createElement(Colored, {\n      key: e,\n      style: {\n        backgroundColor: e\n      },\n      onClick: function onClick() {\n        var t;\n        null === (t = n.activePage) || void 0 === t || t.set({\n          background: e\n        });\n      }\n    });\n  })), react_1.default.createElement(images_grid_1.ImagesGrid, {\n    images: null == l ? void 0 : l.map(function (e) {\n      return e.results;\n    }).flat(),\n    isLoading: s,\n    getPreview: function getPreview(e) {\n      return e.urls.small;\n    },\n    loadMore: function loadMore() {\n      d || c(u + 1);\n    },\n    onSelect: function onSelect(e) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var t;\n        return __generator(this, function (r) {\n          return fetch(base_url_1.API + \"/download-unsplash?id=\" + e.id + \"&KEY=\" + validate_key_1.getKey()), null === (t = n.activePage) || void 0 === t || t.set({\n            background: e.urls.regular\n          }), [2];\n        });\n      });\n    },\n    getCredit: function getCredit(e) {\n      return react_1.default.createElement(\"span\", null, \"Photo by\", \" \", react_1.default.createElement(\"a\", {\n        href: \"https://unsplash.com/@\" + e.user.username + \"?utm_source=polotno&utm_medium=referral\"\n      }, e.user.name), \" \", \"on\", \" \", react_1.default.createElement(\"a\", {\n        href: \"https://unsplash.com/?utm_source=polotno&utm_medium=referral\"\n      }, \"Unsplash\"));\n    }\n  }));\n});","map":null,"metadata":{},"sourceType":"script"}