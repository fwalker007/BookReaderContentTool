{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (t, e, n, o) {\n  return new (n || (n = Promise))(function (r, s) {\n    function a(t) {\n      try {\n        l(o.next(t));\n      } catch (t) {\n        s(t);\n      }\n    }\n\n    function i(t) {\n      try {\n        l(o.throw(t));\n      } catch (t) {\n        s(t);\n      }\n    }\n\n    function l(t) {\n      var e;\n      t.done ? r(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n        t(e);\n      })).then(a, i);\n    }\n\n    l((o = o.apply(t, e || [])).next());\n  });\n},\n    __generator = this && this.__generator || function (t, e) {\n  var n,\n      o,\n      r,\n      s,\n      a = {\n    label: 0,\n    sent: function sent() {\n      if (1 & r[0]) throw r[1];\n      return r[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return s = {\n    next: i(0),\n    throw: i(1),\n    return: i(2)\n  }, \"function\" == typeof Symbol && (s[Symbol.iterator] = function () {\n    return this;\n  }), s;\n\n  function i(s) {\n    return function (i) {\n      return function (s) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; a;) {\n          try {\n            if (n = 1, o && (r = 2 & s[0] ? o.return : s[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, s[1])).done) return r;\n\n            switch (o = 0, r && (s = [2 & s[0], r.value]), s[0]) {\n              case 0:\n              case 1:\n                r = s;\n                break;\n\n              case 4:\n                return a.label++, {\n                  value: s[1],\n                  done: !1\n                };\n\n              case 5:\n                a.label++, o = s[1], s = [0];\n                continue;\n\n              case 7:\n                s = a.ops.pop(), a.trys.pop();\n                continue;\n\n              default:\n                if (!(r = a.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== s[0] && 2 !== s[0])) {\n                  a = 0;\n                  continue;\n                }\n\n                if (3 === s[0] && (!r || s[1] > r[0] && s[1] < r[3])) {\n                  a.label = s[1];\n                  break;\n                }\n\n                if (6 === s[0] && a.label < r[1]) {\n                  a.label = r[1], r = s;\n                  break;\n                }\n\n                if (r && a.label < r[2]) {\n                  a.label = r[2], a.ops.push(s);\n                  break;\n                }\n\n                r[2] && a.ops.pop(), a.trys.pop();\n                continue;\n            }\n\n            s = e.call(t, a);\n          } catch (t) {\n            s = [6, t], o = 0;\n          } finally {\n            n = r = 0;\n          }\n        }\n\n        if (5 & s[0]) throw s[1];\n        return {\n          value: s[0] ? s[1] : void 0,\n          done: !0\n        };\n      }([s, i]);\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.injectCustomFont = exports.injectGoogleFont = exports.loadFont = exports.getFontsList = exports.setGoogleFonts = void 0;\nvar GOOGLE_FONTS = [\"Roboto\", \"Amatic SC\", \"Press Start 2P\", \"Marck Script\", \"Rubik Mono One\"];\n\nfunction setGoogleFonts(t) {\n  GOOGLE_FONTS = t;\n}\n\nfunction getFontsList() {\n  return GOOGLE_FONTS;\n}\n\nexports.setGoogleFonts = setGoogleFonts, exports.getFontsList = getFontsList;\nvar TEXT_TEXT = \"Some test text;?#D-ПРИВЕТ!\",\n    canvas = document.createElement(\"canvas\"),\n    ctx = canvas.getContext(\"2d\");\n\nfunction measureArial() {\n  return measureFont(\"Arial\");\n}\n\nfunction measureFont(t) {\n  return ctx.font = \"normal 40px '\" + t + \"', Arial\", ctx.measureText(TEXT_TEXT).width;\n}\n\nvar MAX_ATTEMPTS = 100,\n    loadedFonts = {\n  Arial: !0\n};\n\nfunction loadFont(t) {\n  var e;\n  return __awaiter(this, void 0, void 0, function () {\n    var n, o, r, s, a;\n    return __generator(this, function (i) {\n      switch (i.label) {\n        case 0:\n          return loadedFonts[t] ? [2] : (n = !!(null === (e = document.fonts) || void 0 === e ? void 0 : e.load), o = measureArial(), n ? [4, document.fonts.load(\"16px '\" + t + \"'\")] : [3, 2]);\n\n        case 1:\n          if (i.sent(), a = measureFont(t), o !== a) return loadedFonts[t] = !0, [2];\n          i.label = 2;\n\n        case 2:\n          r = measureFont(t), s = 0, i.label = 3;\n\n        case 3:\n          return s < MAX_ATTEMPTS ? (a = measureFont(t), a !== r || a !== o ? (loadedFonts[t] = !0, [2]) : [4, new Promise(function (t) {\n            return setTimeout(t, 60);\n          })]) : [3, 6];\n\n        case 4:\n          i.sent(), i.label = 5;\n\n        case 5:\n          return s++, [3, 3];\n\n        case 6:\n          return [2];\n      }\n    });\n  });\n}\n\nexports.loadFont = loadFont;\nvar registeredGoogleFonts = {};\n\nfunction injectGoogleFont(t) {\n  if (!registeredGoogleFonts[t]) {\n    var e = \"https://fonts.googleapis.com/css?family=\" + t.replace(/ /g, \"+\"),\n        n = document.createElement(\"link\");\n    n.type = \"text/css\", n.href = e, n.rel = \"stylesheet\", document.getElementsByTagName(\"head\")[0].appendChild(n), registeredGoogleFonts[t] = !0;\n  }\n}\n\nexports.injectGoogleFont = injectGoogleFont;\nvar registeredCustomFonts = {};\n\nfunction injectCustomFont(t) {\n  var e = t.fontFamily;\n\n  if (!registeredCustomFonts[e] && (t.url || t.styles)) {\n    var n = document.createElement(\"style\");\n    n.type = \"text/css\";\n    var o = t.styles || (t.url ? [{\n      src: 'url(\"' + t.url + '\")'\n    }] : []),\n        r = \"\";\n    o.forEach(function (t) {\n      r += \"\\n      @font-face {\\n        font-family: '\" + e + \"';\\n        src: \" + t.src + \";\\n        font-style: \" + (t.fontStyle || \"normal\") + \";\\n        font-weight: \" + (t.fontWeight || \"normal\") + \";\\n      }\\n    \";\n    }), n.innerHTML = r, document.getElementsByTagName(\"head\")[0].appendChild(n), registeredCustomFonts[t.fontFamily] = !0;\n  }\n}\n\nexports.injectCustomFont = injectCustomFont;","map":null,"metadata":{},"sourceType":"script"}