{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (e, t, r, n) {\n  void 0 === n && (n = r), Object.defineProperty(e, n, {\n    enumerable: !0,\n    get: function get() {\n      return t[r];\n    }\n  });\n} : function (e, t, r, n) {\n  void 0 === n && (n = r), e[n] = t[r];\n}),\n    __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (e, t) {\n  Object.defineProperty(e, \"default\", {\n    enumerable: !0,\n    value: t\n  });\n} : function (e, t) {\n  e.default = t;\n}),\n    __importStar = this && this.__importStar || function (e) {\n  if (e && e.__esModule) return e;\n  var t = {};\n  if (null != e) for (var r in e) {\n    \"default\" !== r && Object.prototype.hasOwnProperty.call(e, r) && __createBinding(t, e, r);\n  }\n  return __setModuleDefault(t, e), t;\n},\n    __awaiter = this && this.__awaiter || function (e, t, r, n) {\n  return new (r || (r = Promise))(function (a, i) {\n    function u(e) {\n      try {\n        l(n.next(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function o(e) {\n      try {\n        l(n.throw(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function l(e) {\n      var t;\n      e.done ? a(e.value) : (t = e.value, t instanceof r ? t : new r(function (e) {\n        e(t);\n      })).then(u, o);\n    }\n\n    l((n = n.apply(e, t || [])).next());\n  });\n},\n    __generator = this && this.__generator || function (e, t) {\n  var r,\n      n,\n      a,\n      i,\n      u = {\n    label: 0,\n    sent: function sent() {\n      if (1 & a[0]) throw a[1];\n      return a[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return i = {\n    next: o(0),\n    throw: o(1),\n    return: o(2)\n  }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n    return this;\n  }), i;\n\n  function o(i) {\n    return function (o) {\n      return function (i) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; u;) {\n          try {\n            if (r = 1, n && (a = 2 & i[0] ? n.return : i[0] ? n.throw || ((a = n.return) && a.call(n), 0) : n.next) && !(a = a.call(n, i[1])).done) return a;\n\n            switch (n = 0, a && (i = [2 & i[0], a.value]), i[0]) {\n              case 0:\n              case 1:\n                a = i;\n                break;\n\n              case 4:\n                return u.label++, {\n                  value: i[1],\n                  done: !1\n                };\n\n              case 5:\n                u.label++, n = i[1], i = [0];\n                continue;\n\n              case 7:\n                i = u.ops.pop(), u.trys.pop();\n                continue;\n\n              default:\n                if (!(a = u.trys, (a = a.length > 0 && a[a.length - 1]) || 6 !== i[0] && 2 !== i[0])) {\n                  u = 0;\n                  continue;\n                }\n\n                if (3 === i[0] && (!a || i[1] > a[0] && i[1] < a[3])) {\n                  u.label = i[1];\n                  break;\n                }\n\n                if (6 === i[0] && u.label < a[1]) {\n                  u.label = a[1], a = i;\n                  break;\n                }\n\n                if (a && u.label < a[2]) {\n                  u.label = a[2], u.ops.push(i);\n                  break;\n                }\n\n                a[2] && u.ops.pop(), u.trys.pop();\n                continue;\n            }\n\n            i = t.call(e, u);\n          } catch (e) {\n            i = [6, e], n = 0;\n          } finally {\n            r = a = 0;\n          }\n        }\n\n        if (5 & i[0]) throw i[1];\n        return {\n          value: i[0] ? i[1] : void 0,\n          done: !0\n        };\n      }([i, o]);\n    };\n  }\n},\n    __importDefault = this && this.__importDefault || function (e) {\n  return e && e.__esModule ? e : {\n    default: e\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.ElementsPanel = void 0;\n\nvar react_1 = __importDefault(require(\"react\")),\n    mobx_state_tree_1 = require(\"mobx-state-tree\"),\n    core_1 = require(\"@blueprintjs/core\"),\n    swr_1 = __importStar(require(\"swr\")),\n    images_grid_1 = require(\"./images-grid\"),\n    image_1 = require(\"../utils/image\"),\n    svg_1 = require(\"../utils/svg\"),\n    base_url_1 = require(\"../utils/base-url\"),\n    validate_key_1 = require(\"../utils/validate-key\"),\n    Iconscout = function Iconscout(e) {\n  var t,\n      r,\n      n = e.query,\n      a = e.store,\n      i = swr_1.useSWRInfinite(function (e) {\n    return base_url_1.API + \"/get-iconscout?query=\" + n + \"&page=\" + (e + 1) + \"&KEY=\" + validate_key_1.getKey();\n  }),\n      u = i.data,\n      o = i.error,\n      l = i.mutate,\n      s = i.size,\n      c = i.setSize;\n  i.isValidating;\n  react_1.default.useEffect(function () {\n    l();\n  }, [n]);\n\n  var d = !u && !o || !!(s > 0 && u && void 0 === u[s - 1]),\n      _ = 0 === (null === (t = null == u ? void 0 : u[0]) || void 0 === t ? void 0 : t.length) || u && (null === (r = u[u.length - 1].response.items.data) || void 0 === r ? void 0 : r.length) < 20;\n\n  return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(\"p\", {\n    style: {\n      textAlign: \"center\"\n    }\n  }, \"Icons by\", \" \", react_1.default.createElement(\"a\", {\n    href: \"https://iconscout.com/\",\n    target: \"_blank\"\n  }, \"iconscout\")), react_1.default.createElement(images_grid_1.ImagesGrid, {\n    shadowEnabled: !1,\n    rowsNumber: 3,\n    images: null == u ? void 0 : u.map(function (e) {\n      return e.response.items.data;\n    }).flat(),\n    getPreview: function getPreview(e) {\n      return e.urls.png_128;\n    },\n    isLoading: d,\n    loadMore: function loadMore() {\n      _ || c(s + 1);\n    },\n    onSelect: function onSelect(e, t) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var r, n, i;\n        return __generator(this, function (u) {\n          switch (u.label) {\n            case 0:\n              return [4, image_1.getImageSize(e.urls.png_128)];\n\n            case 1:\n              return r = u.sent(), n = r.width, i = r.height, a.history.transaction(function () {\n                return __awaiter(void 0, void 0, void 0, function () {\n                  var r, u, o, l, s, c, d;\n                  return __generator(this, function (_) {\n                    switch (_.label) {\n                      case 0:\n                        return r = ((null == t ? void 0 : t.x) || a.width / 2) - n / 2, u = ((null == t ? void 0 : t.y) || a.height / 2) - i / 2, o = null === (d = a.activePage) || void 0 === d ? void 0 : d.addElement({\n                          type: \"svg\",\n                          width: n,\n                          height: i,\n                          x: r,\n                          y: u\n                        }), l = e.uuid, [4, fetch(base_url_1.API + \"/download-iconscout?uuid=\" + l + \"&KEY=\" + validate_key_1.getKey())];\n\n                      case 1:\n                        return [4, _.sent().json()];\n\n                      case 2:\n                        return (s = _.sent().url) ? [4, svg_1.urlToBase64(s)] : (alert(\"Image loading is failed. Please try again later.\"), [2]);\n\n                      case 3:\n                        return c = _.sent(), mobx_state_tree_1.isAlive(o) ? [4, o.set({\n                          src: c\n                        })] : [3, 5];\n\n                      case 4:\n                        _.sent(), _.label = 5;\n\n                      case 5:\n                        return [2];\n                    }\n                  });\n                });\n              }), [2];\n          }\n        });\n      });\n    }\n  }));\n},\n    BasicShapes = function BasicShapes(e) {\n  var t = e.store,\n      r = swr_1.default(base_url_1.API + \"/get-basic-shapes?KEY=\" + validate_key_1.getKey()),\n      n = r.data;\n  r.error, r.isValidating;\n  return react_1.default.createElement(images_grid_1.ImagesGrid, {\n    shadowEnabled: !1,\n    rowsNumber: 3,\n    images: null == n ? void 0 : n.items,\n    getPreview: function getPreview(e) {\n      return e.url;\n    },\n    isLoading: !n,\n    itemHeight: 100,\n    onSelect: function onSelect(e, r) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var n, a, i, u, o, l, s;\n        return __generator(this, function (c) {\n          switch (c.label) {\n            case 0:\n              return [4, image_1.getImageSize(e.url)];\n\n            case 1:\n              return n = c.sent(), a = n.width, i = n.height, [4, svg_1.urlToBase64(e.url)];\n\n            case 2:\n              return u = c.sent(), o = ((null == r ? void 0 : r.x) || t.width / 2) - a / 2, l = ((null == r ? void 0 : r.y) || t.height / 2) - i / 2, null === (s = t.activePage) || void 0 === s ? void 0 : s.addElement({\n                type: \"svg\",\n                width: a,\n                height: i,\n                x: o,\n                y: l,\n                src: u,\n                keepRatio: !1\n              }), [2];\n          }\n        });\n      });\n    }\n  });\n},\n    ElementsPanel = function ElementsPanel(e) {\n  var t = e.store,\n      r = react_1.default.useRef(),\n      n = react_1.default.useState(\"\"),\n      a = n[0],\n      i = n[1],\n      u = react_1.default.useState(a),\n      o = u[0],\n      l = u[1];\n  react_1.default.useEffect(function () {\n    return r.current = setTimeout(function () {\n      l(a);\n    }, 500), function () {\n      clearTimeout(r.current);\n    };\n  }, [a]);\n  var s = !!a;\n  return react_1.default.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }, react_1.default.createElement(core_1.InputGroup, {\n    leftIcon: \"search\",\n    placeholder: \"Search...\",\n    onChange: function onChange(e) {\n      i(e.target.value);\n    },\n    style: {\n      marginBottom: \"20px\"\n    }\n  }), s && react_1.default.createElement(Iconscout, {\n    query: o,\n    store: t\n  }), !s && react_1.default.createElement(BasicShapes, {\n    store: t\n  }));\n};\n\nexports.ElementsPanel = ElementsPanel;","map":null,"metadata":{},"sourceType":"script"}