{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (e, t, n, r) {\n  return new (n || (n = Promise))(function (a, i) {\n    function l(e) {\n      try {\n        u(r.next(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function o(e) {\n      try {\n        u(r.throw(e));\n      } catch (e) {\n        i(e);\n      }\n    }\n\n    function u(e) {\n      var t;\n      e.done ? a(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n        e(t);\n      })).then(l, o);\n    }\n\n    u((r = r.apply(e, t || [])).next());\n  });\n},\n    __generator = this && this.__generator || function (e, t) {\n  var n,\n      r,\n      a,\n      i,\n      l = {\n    label: 0,\n    sent: function sent() {\n      if (1 & a[0]) throw a[1];\n      return a[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return i = {\n    next: o(0),\n    throw: o(1),\n    return: o(2)\n  }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n    return this;\n  }), i;\n\n  function o(i) {\n    return function (o) {\n      return function (i) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; l;) {\n          try {\n            if (n = 1, r && (a = 2 & i[0] ? r.return : i[0] ? r.throw || ((a = r.return) && a.call(r), 0) : r.next) && !(a = a.call(r, i[1])).done) return a;\n\n            switch (r = 0, a && (i = [2 & i[0], a.value]), i[0]) {\n              case 0:\n              case 1:\n                a = i;\n                break;\n\n              case 4:\n                return l.label++, {\n                  value: i[1],\n                  done: !1\n                };\n\n              case 5:\n                l.label++, r = i[1], i = [0];\n                continue;\n\n              case 7:\n                i = l.ops.pop(), l.trys.pop();\n                continue;\n\n              default:\n                if (!(a = l.trys, (a = a.length > 0 && a[a.length - 1]) || 6 !== i[0] && 2 !== i[0])) {\n                  l = 0;\n                  continue;\n                }\n\n                if (3 === i[0] && (!a || i[1] > a[0] && i[1] < a[3])) {\n                  l.label = i[1];\n                  break;\n                }\n\n                if (6 === i[0] && l.label < a[1]) {\n                  l.label = a[1], a = i;\n                  break;\n                }\n\n                if (a && l.label < a[2]) {\n                  l.label = a[2], l.ops.push(i);\n                  break;\n                }\n\n                a[2] && l.ops.pop(), l.trys.pop();\n                continue;\n            }\n\n            i = t.call(e, l);\n          } catch (e) {\n            i = [6, e], r = 0;\n          } finally {\n            n = a = 0;\n          }\n        }\n\n        if (5 & i[0]) throw i[1];\n        return {\n          value: i[0] ? i[1] : void 0,\n          done: !0\n        };\n      }([i, o]);\n    };\n  }\n},\n    __importDefault = this && this.__importDefault || function (e) {\n  return e && e.__esModule ? e : {\n    default: e\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.UploadPanel = exports.setUploadFunc = void 0;\n\nvar react_1 = __importDefault(require(\"react\")),\n    core_1 = require(\"@blueprintjs/core\"),\n    image_1 = require(\"../utils/image\"),\n    file_1 = require(\"../utils/file\"),\n    images_grid_1 = require(\"./images-grid\"),\n    uploadFunc = function uploadFunc(e) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (t) {\n      return [2, file_1.localFileToURL(e)];\n    });\n  });\n};\n\nfunction setUploadFunc(e) {\n  uploadFunc = e;\n}\n\nexports.setUploadFunc = setUploadFunc;\n\nvar UploadPanel = function UploadPanel(e) {\n  var t = e.store,\n      n = react_1.default.useState([]),\n      r = n[0],\n      a = n[1],\n      i = react_1.default.useState(!1),\n      l = i[0],\n      o = i[1];\n  return react_1.default.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }, react_1.default.createElement(\"div\", {\n    style: {\n      height: \"45px\",\n      paddingTop: \"5px\"\n    }\n  }, \"Do you want to upload your own images?\"), react_1.default.createElement(\"div\", {\n    style: {\n      marginBottom: \"20px\"\n    }\n  }, react_1.default.createElement(\"label\", {\n    htmlFor: \"input-file\"\n  }, react_1.default.createElement(core_1.Button, {\n    icon: \"upload\",\n    style: {\n      width: \"100%\"\n    },\n    onClick: function onClick() {\n      var e;\n      null === (e = document.querySelector(\"#input-file\")) || void 0 === e || e.click();\n    }\n  }, \"Upload\"), react_1.default.createElement(\"input\", {\n    type: \"file\",\n    id: \"input-file\",\n    style: {\n      display: \"none\"\n    },\n    onChange: function onChange(e) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var t, n, r, i, l;\n        return __generator(this, function (u) {\n          switch (u.label) {\n            case 0:\n              t = e.target, o(!0), n = function n(e) {\n                var t;\n                return __generator(this, function (n) {\n                  switch (n.label) {\n                    case 0:\n                      return [4, uploadFunc(e)];\n\n                    case 1:\n                      return t = n.sent(), a(function (e) {\n                        return e.concat([t]);\n                      }), [2];\n                  }\n                });\n              }, r = 0, i = t.files, u.label = 1;\n\n            case 1:\n              return r < i.length ? (l = i[r], [5, n(l)]) : [3, 4];\n\n            case 2:\n              u.sent(), u.label = 3;\n\n            case 3:\n              return r++, [3, 1];\n\n            case 4:\n              return o(!1), t.value = null, [2];\n          }\n        });\n      });\n    },\n    multiple: !0\n  }))), react_1.default.createElement(images_grid_1.ImagesGrid, {\n    images: r,\n    isLoading: l,\n    getPreview: function getPreview(e) {\n      return e;\n    },\n    onSelect: function onSelect(e, n) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var r, a, i, l, o, u, c, s, d;\n        return __generator(this, function (f) {\n          switch (f.label) {\n            case 0:\n              return [4, image_1.getImageSize(e)];\n\n            case 1:\n              return r = f.sent(), a = r.width, i = r.height, l = e.indexOf(\"svg+xml\") >= 0 || e.indexOf(\".svg\") >= 0, o = l ? \"svg\" : \"image\", u = Math.min(t.width / a, t.height / i, 1), a *= u, i *= u, c = ((null == n ? void 0 : n.x) || t.width / 2) - a / 2, s = ((null == n ? void 0 : n.y) || t.height / 2) - i / 2, null === (d = t.activePage) || void 0 === d || d.addElement({\n                type: o,\n                src: e,\n                x: c,\n                y: s,\n                width: a,\n                height: i\n              }), [2];\n          }\n        });\n      });\n    }\n  }));\n};\n\nexports.UploadPanel = UploadPanel;","map":null,"metadata":{},"sourceType":"script"}