{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  return (__assign = Object.assign || function (t) {\n    for (var e, n = 1, o = arguments.length; n < o; n++) {\n      for (var r in e = arguments[n]) {\n        Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n      }\n    }\n\n    return t;\n  }).apply(this, arguments);\n},\n    __awaiter = this && this.__awaiter || function (t, e, n, o) {\n  return new (n || (n = Promise))(function (r, a) {\n    function i(t) {\n      try {\n        c(o.next(t));\n      } catch (t) {\n        a(t);\n      }\n    }\n\n    function l(t) {\n      try {\n        c(o.throw(t));\n      } catch (t) {\n        a(t);\n      }\n    }\n\n    function c(t) {\n      var e;\n      t.done ? r(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n        t(e);\n      })).then(i, l);\n    }\n\n    c((o = o.apply(t, e || [])).next());\n  });\n},\n    __generator = this && this.__generator || function (t, e) {\n  var n,\n      o,\n      r,\n      a,\n      i = {\n    label: 0,\n    sent: function sent() {\n      if (1 & r[0]) throw r[1];\n      return r[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return a = {\n    next: l(0),\n    throw: l(1),\n    return: l(2)\n  }, \"function\" == typeof Symbol && (a[Symbol.iterator] = function () {\n    return this;\n  }), a;\n\n  function l(a) {\n    return function (l) {\n      return function (a) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; i;) {\n          try {\n            if (n = 1, o && (r = 2 & a[0] ? o.return : a[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, a[1])).done) return r;\n\n            switch (o = 0, r && (a = [2 & a[0], r.value]), a[0]) {\n              case 0:\n              case 1:\n                r = a;\n                break;\n\n              case 4:\n                return i.label++, {\n                  value: a[1],\n                  done: !1\n                };\n\n              case 5:\n                i.label++, o = a[1], a = [0];\n                continue;\n\n              case 7:\n                a = i.ops.pop(), i.trys.pop();\n                continue;\n\n              default:\n                if (!(r = i.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== a[0] && 2 !== a[0])) {\n                  i = 0;\n                  continue;\n                }\n\n                if (3 === a[0] && (!r || a[1] > r[0] && a[1] < r[3])) {\n                  i.label = a[1];\n                  break;\n                }\n\n                if (6 === a[0] && i.label < r[1]) {\n                  i.label = r[1], r = a;\n                  break;\n                }\n\n                if (r && i.label < r[2]) {\n                  i.label = r[2], i.ops.push(a);\n                  break;\n                }\n\n                r[2] && i.ops.pop(), i.trys.pop();\n                continue;\n            }\n\n            a = e.call(t, i);\n          } catch (t) {\n            a = [6, t], o = 0;\n          } finally {\n            n = r = 0;\n          }\n        }\n\n        if (5 & a[0]) throw a[1];\n        return {\n          value: a[0] ? a[1] : void 0,\n          done: !0\n        };\n      }([a, l]);\n    };\n  }\n},\n    __rest = this && this.__rest || function (t, e) {\n  var n = {};\n\n  for (var o in t) {\n    Object.prototype.hasOwnProperty.call(t, o) && e.indexOf(o) < 0 && (n[o] = t[o]);\n  }\n\n  if (null != t && \"function\" == typeof Object.getOwnPropertySymbols) {\n    var r = 0;\n\n    for (o = Object.getOwnPropertySymbols(t); r < o.length; r++) {\n      e.indexOf(o[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, o[r]) && (n[o[r]] = t[o[r]]);\n    }\n  }\n\n  return n;\n},\n    __importDefault = this && this.__importDefault || function (t) {\n  return t && t.__esModule ? t : {\n    default: t\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.TextPanel = void 0;\n\nvar react_1 = __importDefault(require(\"react\")),\n    mobx_react_lite_1 = require(\"mobx-react-lite\"),\n    core_1 = require(\"@blueprintjs/core\"),\n    toBase64 = function toBase64(t) {\n  return new Promise(function (e, n) {\n    var o = new FileReader();\n    o.readAsDataURL(t), o.onload = function () {\n      return e(o.result);\n    }, o.onerror = function (t) {\n      return n(t);\n    };\n  });\n},\n    FontItem = mobx_react_lite_1.observer(function (t) {\n  var e = t.onSelect,\n      n = t.onRemove,\n      o = t.font;\n  return react_1.default.createElement(\"div\", {\n    style: {\n      height: \"100px\",\n      cursor: \"pointer\",\n      boxShadow: \"0 0 5px rgba(16, 22, 26, 0.3)\",\n      borderRadius: \"5px\",\n      backgroundColor: \"rgba(0, 0, 0, 0.4)\",\n      position: \"relative\",\n      fontFamily: o.fontFamily,\n      fontSize: 25,\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignContent: \"center\",\n      flexDirection: \"column\",\n      textAlign: \"center\",\n      color: \"white\",\n      marginBottom: \"10px\"\n    },\n    onClick: e\n  }, o.fontFamily, \" text\", react_1.default.createElement(core_1.Button, {\n    style: {\n      position: \"absolute\",\n      right: 0,\n      bottom: 0\n    },\n    minimal: !0,\n    icon: \"trash\",\n    onClick: function onClick(t) {\n      t.stopPropagation(), n();\n    }\n  }));\n}),\n    DragButton = function DragButton(t) {\n  var e = t.onSelect,\n      n = __rest(t, [\"onSelect\"]);\n\n  return react_1.default.createElement(core_1.Button, __assign({}, n, {\n    draggable: !0,\n    onClick: function onClick() {\n      return e();\n    },\n    onDragStart: function onDragStart() {\n      window.__polotnoDrop = function (t) {\n        var n = t.x,\n            o = t.y;\n        e({\n          x: n,\n          y: o\n        });\n      };\n    },\n    onDragEnd: function onDragEnd(t) {\n      window.__polotnoDrop = null;\n    }\n  }));\n};\n\nexports.TextPanel = mobx_react_lite_1.observer(function (t) {\n  var e = t.store;\n  react_1.default.useEffect(function () {\n    e.loadFont(\"Amatic SC\"), e.loadFont(\"Roboto\"), e.loadFont(\"Rubik Mono One\"), e.loadFont(\"Press Start 2P\");\n  }, []);\n\n  var n = function n(t) {\n    var n,\n        o = t.width || e.width / 2,\n        r = ((null == t ? void 0 : t.x) || e.width / 2) - o / 2,\n        a = ((null == t ? void 0 : t.y) || e.height / 2) - t.fontSize / 2,\n        i = null === (n = e.activePage) || void 0 === n ? void 0 : n.addElement(__assign(__assign({\n      type: \"text\",\n      fontFamily: \"Roboto\"\n    }, t), {\n      x: r,\n      y: a,\n      width: o\n    }));\n    null == i || i.toggleEditMode(!0);\n  };\n\n  return react_1.default.useEffect(function () {\n    e.fonts.forEach(function (t) {\n      return e.loadFont(t.fontFamily);\n    });\n  }, [e.fonts]), react_1.default.createElement(\"div\", {\n    style: {\n      height: \"100%\"\n    }\n  }, react_1.default.createElement(core_1.Tabs, {\n    large: !0\n  }, react_1.default.createElement(core_1.Tab, {\n    id: \"text\",\n    panel: react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(DragButton, {\n      style: {\n        width: \"100%\",\n        fontSize: \"25px\",\n        marginBottom: \"20px\",\n        fontFamily: \"Roboto\"\n      },\n      minimal: !0,\n      onSelect: function onSelect(t) {\n        n(__assign(__assign({}, t), {\n          fontSize: 125,\n          text: \"HEADER TEXT\",\n          fontFamily: \"Roboto\"\n        }));\n      }\n    }, \"Create HEADER\"), react_1.default.createElement(DragButton, {\n      style: {\n        width: \"100%\",\n        fontSize: \"18px\",\n        marginBottom: \"20px\"\n      },\n      minimal: !0,\n      onSelect: function onSelect(t) {\n        n(__assign(__assign({}, t), {\n          fontSize: 90,\n          text: \"SUB HEADER TEXT\"\n        }));\n      }\n    }, \"Create SUB HEADER\"), react_1.default.createElement(DragButton, {\n      style: {\n        width: \"100%\",\n        fontSize: \"14px\",\n        marginBottom: \"20px\"\n      },\n      minimal: !0,\n      onSelect: function onSelect(t) {\n        n(__assign(__assign({}, t), {\n          fontSize: 80,\n          text: \"Body text\"\n        }));\n      }\n    }, \"Create body text\"), react_1.default.createElement(\"h3\", null, \"Styled text\"), react_1.default.createElement(DragButton, {\n      style: {\n        width: \"100%\",\n        fontSize: \"20px\",\n        marginBottom: \"20px\",\n        fontFamily: \"Amatic SC\"\n      },\n      minimal: !0,\n      onSelect: function onSelect(t) {\n        n(__assign(__assign({}, t), {\n          fontSize: 80,\n          text: \"Cool curved text\",\n          fontFamily: \"Amatic SC\"\n        }));\n      }\n    }, \"Cool curved text\"), react_1.default.createElement(DragButton, {\n      style: {\n        width: \"100%\",\n        fontSize: \"40px\",\n        marginBottom: \"20px\",\n        fontFamily: \"Rubik Mono One\",\n        textAlign: \"center\"\n      },\n      minimal: !0,\n      onSelect: function onSelect(t) {\n        n(__assign(__assign({}, t), {\n          fontSize: 85,\n          width: 650,\n          text: \"GIGANTIC TEXT\",\n          fontFamily: \"Rubik Mono One\"\n        }));\n      }\n    }, \"GIGANTIC TEXT\"), react_1.default.createElement(DragButton, {\n      style: {\n        width: \"100%\",\n        fontSize: \"30px\",\n        marginBottom: \"20px\",\n        fontFamily: '\"Press Start 2P\"',\n        textAlign: \"center\"\n      },\n      minimal: !0,\n      onSelect: function onSelect(t) {\n        n(__assign(__assign({}, t), {\n          fontSize: 50,\n          text: \"JUST DO IT!\",\n          fontFamily: \"Press Start 2P\"\n        }));\n      }\n    }, \"JUST DO IT!\"))\n  }, \"Text\"), react_1.default.createElement(core_1.Tab, {\n    id: \"font\",\n    panel: react_1.default.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"calc(100% - 50px)\"\n      }\n    }, react_1.default.createElement(\"label\", {\n      htmlFor: \"polotno-font-upload\"\n    }, react_1.default.createElement(core_1.Button, {\n      icon: \"upload\",\n      style: {\n        width: \"100%\"\n      },\n      onClick: function onClick() {\n        var t;\n        null === (t = document.querySelector(\"#polotno-font-upload\")) || void 0 === t || t.click();\n      }\n    }, \"Upload\"), react_1.default.createElement(\"input\", {\n      type: \"file\",\n      accept: \".ttf, .otf, .woff, .woff2, .eot\",\n      id: \"polotno-font-upload\",\n      style: {\n        display: \"none\"\n      },\n      onChange: function onChange(t) {\n        return __awaiter(void 0, void 0, void 0, function () {\n          var n, o, r, a, i, l;\n          return __generator(this, function (c) {\n            switch (c.label) {\n              case 0:\n                n = t.target, o = 0, r = n.files, c.label = 1;\n\n              case 1:\n                return o < r.length ? (a = r[o], [4, toBase64(a)]) : [3, 4];\n\n              case 2:\n                i = c.sent(), l = a.name.split(\".\")[0], e.addFont({\n                  fontFamily: l,\n                  url: i\n                }), c.label = 3;\n\n              case 3:\n                return o++, [3, 1];\n\n              case 4:\n                return n.value = null, [2];\n            }\n          });\n        });\n      }\n    })), react_1.default.createElement(\"div\", {\n      style: {\n        paddingTop: \"20px\",\n        overflow: \"auto\",\n        height: \"100%\"\n      }\n    }, e.fonts.map(function (t, o) {\n      return react_1.default.createElement(FontItem, {\n        font: t,\n        key: o,\n        onSelect: function onSelect() {\n          n({\n            fontSize: 80,\n            text: \"Cool curved text\",\n            fontFamily: t.fontFamily\n          });\n        },\n        onRemove: function onRemove() {\n          e.removeFont(t.fontFamily);\n        }\n      });\n    })))\n  }, \"My Fonts\")));\n});","map":null,"metadata":{},"sourceType":"script"}